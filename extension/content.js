(()=>{"use strict";var e,n=document.createElement("canvas");n.id="snow-canvas",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.pointerEvents="none";var o=window.innerWidth,t=window.innerHeight;n.width=o,n.height=t;for(var a=n.getContext("2d"),c=[],i=["#ffffff","#cccccc","#dddddd","#eeeeee","#f2f2f2"],r=0;r<100;r++)c.push({x:Math.random()*o,y:Math.random()*t,size:3*Math.random()+2,speed:1*Math.random()+.5,angle:360*Math.random(),color:i[Math.floor(Math.random()*i.length)]});function d(){a.clearRect(0,0,n.width,n.height),c.forEach((function(e){var n=e.angle*Math.PI/180,c=e.x+Math.cos(n)*e.speed,i=e.y+Math.sin(n)*e.speed;e.x=c>o?0:c<0?o:c,e.y=i>t?0:i,a.beginPath(),a.arc(e.x,e.y,e.size,0,2*Math.PI),a.fillStyle=e.color,a.fill()})),e=requestAnimationFrame(d)}var l=!1;if(chrome.runtime&&chrome.runtime.connect){var s=chrome.runtime.connect();s.onMessage.addListener((function(o){console.log("Received message from background script:",o),"colorList"===o.type&&(console.log("recieved colorList"),i.length=0,i.push.apply(i,o.data),c.forEach((function(e){e.color=i[Math.floor(Math.random()*i.length)]}))),"toggleSnow"===o.type&&(l?(cancelAnimationFrame(e),document.body.removeChild(n),l=!1):(d(),document.body.appendChild(n),l=!0))})),s.onDisconnect.addListener((function(){console.log("Disconnected from background script")})),window.addEventListener("unload",(function(){s.disconnect()}))}else console.log("Chrome runtime is not available.")})();